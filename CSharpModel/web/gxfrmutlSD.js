gx.GxObject=function(){this._isTrn=null;this.Gx_mode="";this.ServerClass="";this.ReadonlyForm=false;this.ObjectType="web";this.MasterPage=null;this.IsMasterPage=false;this.IsComponent=false;this.AjaxSecurity=gx.ajax.securityLevels.high;this.JustCreated=false;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.UserControls=[];this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings=[];this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls=[];this.VarControlMap=[];this.FormBCs=[];this.LvlOlds=[];this.ServerEvents=[];this.hasEnterEvent=false;this.autoRefresh=false;this.conditionsChanged=false;this.setObjectType=function(a){this.ObjectType=a};this.getObjectType=function(){return this.ObjectType};this.isTransaction=function(){if(this._isTrn!=null){return this._isTrn}this._isTrn=(this.getObjectType()=="trn");return this._isTrn};this.setAjaxSecurity=function(a){switch(a){case"Medium":this.AjaxSecurity=gx.ajax.securityLevels.medium;break;case"Low":this.AjaxSecurity=gx.ajax.securityLevels.low;break;default:this.AjaxSecurity=gx.ajax.securityLevels.high;break}};this.addKeyListener=function(b,a){gx.evt.addKeyListener(this.CmpContext,b,a)};this.clearMessages=function(){this.MsgList.length=0};this.addMessage=function(a){this.MsgList.push(a)};this.showMessages=function(){var b=[];var a=this.MsgList.length;for(var c=0;c<a;c++){b.push({att:"",type:2,text:this.MsgList[c]})}var e={};var d=(this.CmpContext=="")?"MAIN":this.CmpContext;e[d]=b;gx.fn.setErrorViewer(e);this.clearMessages()};this.setPrompt=function(b,a){gx.fn.attachCtrl(b,{isPrompt:true,wc:this.CmpContext,mp:this.IsMasterPage,controls:a})};this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){var b=[];var e=gx.csv.lastEvtResponse.gxValues;var a=e.length;for(var c=0;c<a;c++){var d=e[c];if(d.CmpContext==this.CmpContext&&gx.lang.booleanValue(d.IsMasterPage)==this.IsMasterPage){b.push(d);break}}gx.fn.setPostValues(b)}};this.refreshInputs=function(b){var a=b.length;for(var c=0;c<a;c++){var d=b[c];var e=this.getValidStructFld(d[1]);if(e!=null){e.c2v()}}};this.refreshOutputs=function(f){var b=f.length;for(var c=0;c<b;c++){var e=f[c];if(e.fld){var h=this.getValidStructFld(e.fld);if(h!=null){h.v2c()}else{var g=this.getVariable(e.av);if(g!=null&&typeof(g)=="object"){var d=this.getFormBCForVar(e.av);if(d!=null){this.bcToScreen(d,g)}var a=this.getGridForColl(e.av);if(a){a.refreshCollection(g)}}gx.fn.setHidden(e.fld,g)}}else{if(e.ctrl){if(gx.uc.isUserControl(e.ctrl)){e.ctrl.execShowFunction()}}}}this.showMessages()};this.refreshServerOutputs=function(d){var a=d.length;for(var b=0;b<a;b++){var c=d[b];var f=gx.fn.getHidden(this.CmpContext+c.fld);if(f!=undefined){var e=this.getValidStructFld(c.fld);if(e){e.v2v(f);e.v2c()}else{this.setVariable(d[b].av,f)}}}};this.getContextObject=function(b){var c=this.getValidStructFld(b);if(c!=null){var a=gx.fn.getControlValue_impl(this.CmpContext+b);if(a!=null){return a}}return""};this.getValidStructId=function(a){if(!gx.lang.emptyObject(a)){var c=this.getControlIds();
for(var b=0;b<c.length;b++){validStruct=this.getValidStruct(c[b]);if(this.isSameField(validStruct,a)){return c[b]}}}return -1};this.getValidStructFld=function(b){if(!gx.lang.emptyObject(b)){var e=this.getControlIds();var a=e.length;for(var c=0;c<a;c++){var d=this.getValidStruct(e[c]);if(this.isSameField(d,b)){return d}}}return null};this.isSameField=function(f,e){var a=f.fld;if(a==e){return true}if(this.IsComponent){var b=e.indexOf(this.CmpContext);if(b==0){e=e.substring(this.CmpContext.length)}}if(f.grid!=0){var d=/^([\s\S]+)_((?:[0-9]{4})*)/;var c=d.exec(e);if(c&&c.length==3){e=c[1]}}return(a==e)};this.getUserFocus=function(){var a=gx.fn.getControlValue(this.CmpContext+"GX_FocusControl");if(gx.lang.emptyObject(a)){if(this.hasMasterPage()){a=this.MasterPage.getUserFocus();if(!gx.lang.emptyObject(a)){return a}}for(var b=this.WebComponents.length-1;b>=0;b--){a=this.WebComponents[b].getUserFocus();if(!gx.lang.emptyObject(a)){return a}}}return a};this.hasMasterPage=function(){return(this.MasterPage!=null)};this.setComponent=function(a){this.CmpControls[a.id.toLowerCase()]=a};this.getComponentPrefix=function(a){var b=this.getComponentData(a);if(b){return(b.Prefix||"")}return""};this.getComponentData=function(a){return this.CmpControls[a.toLowerCase()]};this.createWebComponent=function(f,j,d,a,c,h){var b=a||"";var e=h||this.getComponentPrefix(f);var g=gx.ajax.dynComponent(j,d,e,b);if(!g.DynComponentMap){g.DynComponentMap={}}g.DynComponentMap[h]=c;gx.ajax.setPostResponse(g)};this.setWebComponent=function(a){this.deleteComponent(a.CmpContext,a);this.WebComponents[a.CmpContext]=a;this.WebComponents.push(a);a.JustCreated=true};this.getWebComponent=function(a){return this.WebComponents[a]};this.deleteComponent=function(g,c){var e=this.getWebComponent(g);if(e){gx.fn.deleteHidden(g);if(!gx.lang.emptyObject(c)){gx.fn.setHidden(c.CmpContext,c.ServerClass)}e.ondestroy();delete this.WebComponents[g];var a=this.WebComponents.length;for(var b=0;b<a;b++){if(this.WebComponents[b].CmpContext==g){this.WebComponents.removeAt(b);break}}var d=this.WebComponents;for(var f in d){if(isNaN(parseInt(f))){if(f.indexOf(g)==0){this.deleteComponent(f)}}}}};this.setCmpContext=function(a){if(a!=undefined){if(a!=""){this.IsComponent=true}this.CmpContext=a}};this.getOldLvl=function(c){for(var d in this.LvlOlds){var b=this.LvlOlds[d];var a=b.length;for(var e=0;e<a;e++){if(b[e]==c){return d}}}return -1};this.refreshDependantGrids=function(g){var a=this.Grids.length;for(var e=0;e<a;e++){var d=this.Grids[e];var f=d.refreshVars;var c=f.length;for(var b=0;b<c;b++){if(f[b].fld==g.fld){d.filterVarChanged();break}}}};this.setGrid=function(a){this.Grids[a.gridName]=a;this.Grids.push(a)};this.getGrid=function(a){return this.Grids[a]};this.getGridById=function(b){var a=this.Grids.length;for(var d=0;d<a;d++){var c=this.Grids[d];if(c.gridId==b){return c}}return null};this.getGridForColl=function(d){var a=this.Grids.length;for(var c=0;c<a;c++){var b=this.Grids[c];if(b.boundedCollName==d){return b}}return null
};this.getFormBCForVar=function(c){for(var a in this.FormBCs){var b=this.FormBCs[a];if(b&&b.gxvar==c){return b}}return null};this.getFormBC=function(a){var c=a;if(this.IsComponent){var b=a.indexOf(this.CmpContext);if(b==0){c=a.substring(this.CmpContext.length)}}return this.FormBCs[c]};this.addBCProperty=function(c,h,g,b){var f=this.getFormBC(c);if(typeof(f)=="undefined"){f={};f.gxvar=b;this.FormBCs[c]=f}if(h instanceof Array){var e=f;var a=h.length;for(var d=0;d<a;d++){if(typeof(e[h[d]])=="undefined"){if(d<a-1){e[h[d]]={}}else{e[h[d]]=g;if(typeof(this[b])=="object"){g.v2bc=function(){var k=this[g.gxvar];if(g.type=="date"){var j=new gx.date.gxdate(k);k=j.getString("Y4MD")}this.valueToBCProp(this[b],h,k)}}break}}e=e[h[d]]}}else{if(typeof(h)=="string"){f[h]=g}}};this.valueToBCProp=function(g,h,b){try{var f=g;var a=h.length;for(var c=0;c<a;c++){if(typeof(f[h[c]])=="object"){f=f[h[c]]}else{f[h[c]]=b;break}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","valueToBCProp")}};this.bcToScreen=function(c,a){for(var f in c){if(f=="gxvar"){continue}try{if(typeof(a[f])=="object"){this.bcToScreen(c[f],a[f])}else{var d=c[f];if(d.grid==0){d.v2v(a[f]);d.v2c()}}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","bcToScreen")}}};this.addGridUCEventHandler=function(b,c,a){if(gx.lang.emptyObject(this.GridUCsEvts[b])){this.GridUCsEvts[b]=[]}this.GridUCsEvts[b].push({e:c,h:a})};this.getGridUCEventHandlers=function(b){var a=this.GridUCsEvts[b];if(gx.lang.emptyObject(a)){return[]}return a};this.setGridUCDynProperty=function(b,c,a,d){this.setGridUCProperty(b,c,a,undefined,d)};this.setGridUCProperty=function(c,d,a,b,e){if(gx.lang.emptyObject(this.GridUCsProps[c])){this.GridUCsProps[c]=[]}this.GridUCsProps[c].push({p:d,h:a,v:b,t:e})};this.getGridUCProperties=function(a){var b=this.GridUCsProps[a];if(gx.lang.emptyObject(b)){return[]}return b};this.addUsercontrolBinding=function(b,a){this.UCBindings[b]=a};this.setUserControl=function(a){this.UserControls[a.ContainerName]=a;this.UserControls.push(a)};this.getUserControl=function(a){var b=this.UserControls[a];if(!b&&this.CmpContext!=""){b=this.UserControls[this.CmpContext+a]}return b};this.execV2CFunctions=function(f){var a=this.UserControls.length;for(var c=0;c<a;c++){var b=this.UserControls[c];try{b.execV2CFunctions()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execV2CFunctions")}if(f==true){try{b.execShowFunction()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execV2CFunctions")}}}};this.execC2VFunctions=function(){var a=this.UserControls.length;for(var b=0;b<a;b++){try{this.UserControls[b].execC2VFunctions()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}try{this.UserControls[b].saveProperties()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}}};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=function(c,a){this[c]=a;FormattedValue=a;if(c.indexOf(this.CmpContext)!=0){gx.fn.setHidden(this.CmpContext+c,a)}if(this.VarControlMap[c]!=undefined){var b=this.VarControlMap[c].type;
if(b=="date"||b=="dtime"){if(typeof(a)=="string"){FormattedValue=new gx.date.gxdate(a)}if(a instanceof gx.date.gxdate){FormattedValue=a.getStringWithFmt("Y4MD")}}if(b=="decimal"&&gx.decimalPoint!="."){FormattedValue=a.toString().replace(".",gx.decimalPoint)}gx.fn.setHidden(this.CmpContext+this.VarControlMap[c].id,FormattedValue)}if(c=="Gx_mode"){this.setMode()}if(this.UCBindings[c]!=undefined){gx.fn.setHidden(this.CmpContext+this.UCBindings[c],a)}};this.getVariable=function(a){return this[a]};this.isServerEvent=function(c){var a=this.ServerEvents.length;for(var b=0;b<a;b++){if(this.ServerEvents[b]==c){return true}}return false};this.setEventParameters=function(d,a){gx.csv.lastEvtRow=null;gx.O=this;var c=true;var g=-1;gx.csv.cmpCtx=this.CmpContext;var f=d.length;for(var e=0;e<f;e++){var b=d[e][0];var k=d[e][1];var j=d[e][2];var m=false;for(var l in a){if(l.toLowerCase()==b.toLowerCase()){this.setVariable(j,a[l]);m=true;break}}if(!m){this.setVariable(j,a)}var h=this.getValidStructFld(k);if(h!=null){if((h.grid!=0)&&(g==-1)){g=h.grid}else{if((h.grid!=0)&&(h.grid!=g)){c=false}}h.v2c()}else{gx.fn.setHidden(this.CmpContext+k,this.getVariable(j))}}if(c){gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(g)}};this.executeServerEvent=function(b,d,f){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var a=true;if((d!=undefined)&&(d==false)){a=false}var e=(typeof(f)=="string")?f:"";if(!gx.lang.emptyObject(gx.csv.lastEvtRow)){e=gx.csv.lastEvtRow}if((e=="")&&(!gx.lang.emptyObject(gx.csv.validatingGrid))){e=gx.csv.lastRow[gx.csv.validatingGrid.gridId]}var c=this.CmpContext+"E"+b+"."+e;gx.evt.execEvt(c,gx.evt.dummyCtrl,a)};this.executeEnterEvent=function(a,c){if(gx.evt.cancelAndRefresh(a)){return}if(gx.dom.hasSubmitControl()){gx.evt.cancel(a,true)}if(c&&c.nodeName=="INPUT"&&(c.type=="text"||c.type=="password")){gx.evt.cancel(a,true)}var b=this.gxOWithEnter();if(b!=null){gx.evt.enter=true;var d="ENTER";if(b.IsMasterPage){d=d+"_MPAGE"}d=b.CmpContext+"E"+d+".";gx.evt.execEvt(d,gx.evt.dummyCtrl);gx.evt.enter=false;gx.evt.cancel(a,true)}};this.gxOWithEnter=function(){if(this.hasEnterEvent){return this}else{if(this.IsComponent){var d=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})/;var b=d.exec(this.CmpContext);var a=((b[1]=="")&&(b[0].indexOf("MP")==0));var c=gx.getObj(b[1],a);if(!gx.lang.emptyObject(c)){return c.gxOWithEnter()}}else{if(this.hasMasterPage()){return this.MasterPage.gxOWithEnter()}}}return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(a){return this.GXValidFnc[a]};this.getControlIds=function(){return this.GXCtrlIds};this.getUsercontrolFromChild=function(c){var a=this.UserControls.length;for(var b=0;b<a;b++){var d=this.UserControls[b].getContainerControl();if(gx.dom.isChildNode(c,d)){return this.UserControls[b]}}return null};this.installFlatLevelDatePickers=function(){var e=null;var d=this.getControlIds();var a=d.length;for(var b=0;b<a;b++){e=this.getValidStruct(d[b]);if((e!=undefined)&&(e.grid==0)&&(e.dp!=undefined)){var c=this.CmpContext+e.fld;
gx.fn.installDatePicker(c,e.dp.f,e.dp.st,e.dp.wn,e.dp.mf,gx.fn.datePickerFormat(e.dp.pic,e.dp.dec,e.len))}}};this.refreshOlds=function(){for(var h in this.LvlOlds){var f=this.LvlOlds[h];if(typeof(f)!="function"){var b=gx.fn.lvlGrid(parseInt(h));var j=undefined;if(b!=0){j=gx.fn.currentGridRow(b)}var g=f.length;for(var d=0;d<g;d++){var a=f[d];var c=a;var k="";var e=gx.fn.vStructForOld(c);if(e){k=gx.typedOld(e.fld,c,e.type)}else{if(!gx.lang.emptyObject(j)){a+="_"+j}k=gx.fn.getHidden(a)}if(typeof(k)!="undefined"){if(!e){window[c]=k}this[c]=k}}}}};this.deleteEventHandlers=function(){try{gx.fx.ctx.deleteHandlers(this);gx.fx.dnd.deleteHandlers(this)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","deleteEventHandlers")}};this.ondestroy=function(){try{this.deleteEventHandlers();var a=this.UserControls.length;for(var c=0;c<a;c++){var b=this.UserControls[c];if(!gx.lang.emptyObject(b.destroy)){try{b.destroy()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","ondestroy")}}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var b=gx.O;gx.setGxO(this.CmpContext,this.IsMasterPage);if(this.hasMasterPage()){this.MasterPage.onpost()}var a=this.WebComponents.length;for(var c=0;c<a;c++){this.WebComponents[c].onpost()}if(this.ReadonlyForm&&this.IsComponent&&b!=this){this.roControlsAsHidden()}this.execC2VFunctions();gx.setGxO(b.CmpContext,b.IsMasterPage)};this.roControlsAsHidden=function(){var f=this.getControlIds();var a=f.length;for(var c=0;c<a;c++){var e=this.getValidStruct(f[c]);if(e.grid==0){var b=this.CmpContext+e.fld;var d=gx.dom.el(b);if(d&&!gx.fn.isAccepted(d)){gx.fn.setHidden(b,e.val())}}}};this.getCtrlIdx=function(e){var d=this.getControlIds();var a=d.length;for(var b=0;b<a;b++){var c=this.getValidStruct(d[b]);if(c&&this.CmpContext+c.fld==e){return gx.fn.controlIds()[b]}}return null};this.onload=function(){gx.setGxO(this.CmpContext,this.IsMasterPage);this.screenToVars();if(this.hasMasterPage()){this.MasterPage.onload()}var a=this.Grids.length;for(var b=0;b<a;b++){this.Grids[b].loadGrid()}a=this.WebComponents.length;for(var b=0;b<a;b++){this.WebComponents[b].onload()}this.installFlatLevelDatePickers();this.refreshOlds();this.execV2CFunctions(true);this.JustCreated=false};this.onunload=function(){if(this.hasMasterPage()){this.MasterPage.onunload()}var a=this.Grids.length;for(var b=0;b<a;b++){this.Grids[b].cleanup();this.Grids[b]=null}this.Grids=[];a=this.WebComponents.length;for(var b=0;b<a;b++){this.WebComponents[b].onunload();this.WebComponents[b]=null}this.WebComponents=[]};this.screenToVars=function(){try{var f=this.getControlIds();var a=f.length;for(var b=0;b<a;b++){var d=this.getValidStruct(f[b]);if(d&&d.lvl==0){d.c2v()}}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","screenToVars")}};this.postbackLoad=function(){if(this.hasMasterPage()){this.MasterPage.postbackLoad()}var a=this.WebComponents.length;for(var b=0;b<a;b++){this.WebComponents[b].postbackLoad()}if(this.IsComponent&&this.JustCreated){this.installFlatLevelDatePickers()}this.execV2CFunctions(true);
this.JustCreated=false;this.conditionsChanged=false};this.addDragSource=function(b,c,d,a){gx.fx.dnd.addSource(this,b,c,d,a)};this.addDropTarget=function(b,c,d,a){gx.fx.dnd.addTarget(this,b,c,d,a)};this.addContextSetter=function(b,c,d,a){gx.fx.ctx.addSetter(this,b,c,d,a)};this.addContextTracker=function(b,c,d,a){gx.fx.ctx.addTracker(this,d,a)};this.addEventHandler=function(c,b,a){gx.fx.dom.addEventHandler(this,c,b,a)}};gx.uc={getNew:function(ParentObject,ControlId,LastId,ClassName,ContainerName,ControlName,GridLvl,GridId,GridRow){var subclass=eval(ClassName);gx.lang.inherits(subclass,gx.uc.UserControl);var userCtrl=new subclass();userCtrl.ContainerName=ContainerName;userCtrl.DesignContainerName=ContainerName;userCtrl.setupControl(ParentObject,ControlName,ControlId,LastId,GridLvl,GridId,GridRow);return userCtrl},fromChild:function(c){var d=gx.pO.getUsercontrolFromChild(c);if(d!=null){return d}if(gx.pO.hasMasterPage()){d=gx.pO.MasterPage.getUsercontrolFromChild(c);if(d!=null){return d}}var a=gx.pO.WebComponents.length;for(var b=0;b<a;b++){d=gx.pO.WebComponents[b].getUsercontrolFromChild(c);if(d!=null){return d}}return null},getUserControlObj:function(c){var b=gx.O.getUserControl(c);if(gx.lang.emptyObject(b)){if(gx.pO.hasMasterPage()){b=gx.pO.MasterPage.getUserControl(c);if(!gx.lang.emptyObject(b)){return b}}var a=gx.pO.WebComponents.length;for(var d=0;d<a;d++){b=gx.pO.WebComponents[d].getUserControl(c);if(!gx.lang.emptyObject(b)){return b}}}return b},userControlContainerId:function(a){var c=a.lastIndexOf("_");if(c!=-1){var b=a.substring(0,c)+"Container"+a.substring(c);if(gx.dom.byId(b)!=null){return b}}return a+"Container"},setProperties:function(f,b){var c=gx.uc.getUserControlObj(gx.uc.userControlContainerId(f));if(c!=null){if(b.length!=undefined){var a=b.length;for(var d=0;d<a;d++){for(var e in b[d]){var g=b[d][e];c[e]=g}}}else{for(var e in b){var g=b[e];c[e]=g}}}},isUserControl:function(b){if(b instanceof gx.uc.UserControl){return true}else{var a=gx.dom.byId(gx.uc.userControlContainerId(b));if(a!=null){if(a.tagName=="DIV"){return true}}}return false},UserControl:function(){this.ParentObject=null;this.GridId="";this.GridRow="";this.ControlId=0;this.ControlLvl=0;this.ContainerName="";this.ControlName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null;this.RealControl=null;this.IsPostBack=false;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(a){var b=(this.GridRow!="")?("_"+this.GridRow):"";return gx.dom.byId(this.DesignContainerName+a+b)};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl};
this.setupControl=function(c,g,b,d,f,e,a){this.ParentObject=c;this.ControlName=g;this.ControlId=b;this.LastIdBefore=d;this.ControlLvl=(f!=undefined)?f:0;this.GridId=(e!=undefined)?e:0;this.GridRow=(a!=undefined)?a:"";this.ParentObject.GXValidFnc[this.ControlId]={lvl:this.ControlLvl,grid:this.GridId,op:[],ip:[],isuc:true,uc:this,fnc:this.validateControl}};this.addValidFunction=function(c,d,a){this.ValidFunctions.push(c);var b=(this.GridRow=="")?"":"_"+this.GridRow;this.ParentObject.addUsercontrolBinding(d,a+b)};this.validateControl=function(){gx.csv.validatingUC=this;var a=this.ValidFunctions.length;for(var c=0;c<a;c++){var b=this.ValidFunctions[c].call(gx.O);if(!b){gx.O.AnyError=1;gx.csv.validatingUC=null;return false}}gx.csv.validatingUC=null;return true};this.attachEvents=function(){try{var c=this.getContainerControl();if(!gx.lang.emptyObject(document.frames)){var a=document.frames.length;if(a>0){var b=0;for(b=0;b<a;b++){var f=document.frames[b];if(gx.dom.isChildNode(f,c)==true){f.frameElement.onfocus=this.onfocus;this.RealControl=f.frameElement;return}}}}else{c.onfocus=this.onfocus;this.RealControl=c}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);this.execShowFunction();if(!gx.csv.anyError){this.setFocusBase()}};this.setFocusBase=function(){if(typeof(this.setFocus)=="function"){this.setFocus()}};this.setHtml=function(a){this.getContainerControl().innerHTML=a};this.createWebComponent=function(c,e,a,b,d){this.ParentObject.createWebComponent(c,e,a,this.GridRow,b,d)};this.deleteWebComponent=function(a){var b=gx.fn.cmpContextFromCtrl(a);this.ParentObject.deleteComponent(b)};this.notifyContext=function(b,a){gx.fx.ctx.notify(null,b,a)};this.addV2CFunction=function(a){this.V2CFunctions.push(a)};this.addC2VFunction=function(a){this.C2VFunctions.push(a)};this.setC2ShowFunction=function(a){this.C2ShowFunction=a};this.execV2CFunctions=function(){var d=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;var c=0;var b=this.V2CFunctions;var a=b.length;for(c=0;c<a;c++){try{b[c](this,this.GridRow)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execV2CFunctions")}}gx.csv.cmpCtx=d};this.execC2VFunctions=function(){var d=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;var c=0;var b=this.C2VFunctions;var a=b.length;for(c=0;c<a;c++){try{b[c](this,this.GridRow)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execC2VFunctions")}}gx.csv.cmpCtx=d};this.execShowFunction=function(){if(this.C2ShowFunction!=null){this.C2ShowFunction(this)}this.IsPostBack=true};this.getEventRow=function(){return this.GridRow};this.addEventHandler=function(a,c){var b=this;this[a]=function(){gx.evt.userReady=false;gx.setGxO(b.ParentObject.CmpContext,b.ParentObject.IsMasterPage);if(b.GridId>0){var d=b.DesignContainerName;var e=new RegExp("^(?:"+b.ParentObject.CmpContext+")?(.+)$");var f=e.exec(b.DesignContainerName);if(f&&f[1]){d=f[1]
}b.ParentObject[d]=b;var g=b.ParentObject.getGridById(b.GridId);if(g){g.instanciateRow(b.GridRow)}}b.execC2VFunctions();c.call(b.ParentObject,b.getEventRow());gx.evt.userReady=true}};this.addProperty=function(b,a){this.Properties[b]=a};this.setProperty=function(b,a,c,d){this.addProperty(b,a);this.PropTypes[b]=d;if(gx.lang.isBooleanType(d)){this[b]=gx.lang.gxBoolean(c)}else{if(gx.lang.isNumericType(d)){if(!gx.lang.emptyObject(c)){this[b]=gx.num.parseFloat(c)}}else{this[b]=c}}};this.setDynProperty=function(b,a,c){this.DynProperties.push(b);this.setProperty(b,a,gx.fn.getHidden(this.getHiddenName(a)),c)};this.refreshDynProperties=function(){var a=this.DynProperties.length;for(var c=0;c<a;c++){var d=this.DynProperties[c];var b=this.Properties[d];this[d]=gx.fn.getHidden(this.getHiddenName(b))}};this.setGridProperties=function(){var d=this.ParentObject.getGridUCProperties(this.ControlName);var a=d.length;for(var c=0;c<a;c++){var f=d[c];var e=f.v;if(typeof(e)=="undefined"){var b=this.getHiddenName(f.h);e=gx.fn.getHidden(b);if(f.t=="color"){e=gx.color.html(e)}}this.setProperty(f.p,f.h,e,f.t)}};this.setGridEventHandlers=function(){var b=this.ParentObject.getGridUCEventHandlers(this.ControlName);var a=b.length;for(var c=0;c<a;c++){var d=b[c];this.addEventHandler(d.e,d.h)}};this.getHiddenName=function(a){var b="";if(this.GridRow!=""){b="_"+this.GridRow}return this.ParentObject.CmpContext+this.ControlName.toUpperCase()+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+a+b};this.saveProperties=function(){for(var b in this.Properties){var a=this[b];if(typeof(this.Properties[b])!="function"){if(typeof(a)!="undefined"&&typeof(a.R)!="undefined"&&typeof(a.G)!="undefined"&&typeof(a.B)!="undefined"){a=gx.color.rgb(a.R,a.G,a.B)}if(gx.lang.isBooleanType(this.PropTypes[b])){a=(a?1:0)}gx.fn.setHidden(this.getHiddenName(this.Properties[b]),a)}}}}};gx.printing={loaded:false,tries:0,waitInterval:100,print:function(b){if(!this.loaded){var a=gx.util.resourceUrl("printingappletsigned.jar",true);var c='<applet name="GeneXusPrintAppletForWindows" archive="'+a+'" code="com/genexus/printing/Printer.class" width="0" height="0">';c+='<param name="path" value="'+gx.util.resourceUrl(gx.basePath,true)+'">';c+='<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p>';c+="</applet>";document.body.appendChild(gx.html.nodesFromText(c)[0]);this.loaded=true}if(this.tries==0){this.printWhenReady(b)}else{gx.dbg.logMsg("Already trying to print a document.")}},printWhenReady:function(a){if(this.tries>=(this.waitInterval*60)){this.tries=0;gx.dbg.logMsg("The printing applet was not loaded.");return}this.tries++;if(this.isReady()){document.GeneXusPrintAppletForWindows.printReport(a.reportFile,a.printerRule,"GXPRN.INI");this.tries=0}else{setTimeout(function(){gx.printing.printWhenReady(a)},this.waitInterval)}},isReady:function(){var a=document.GeneXusPrintAppletForWindows;if(a){if(typeof(a.isReady)=="function"||typeof(a.isReady)=="unknown"){return a.isReady()
}}return false}};gx.fn={attachedControls:function(){return gx.attachedControls},closeWindow:function(a){if(typeof(a)=="string"){if(this.closeFromServer(a)){return}a=[]}if(!a){a=[]}if(gx.popup.ispopup()){var b=gx.popup.getPopup();if(!b.frameWindow||(b.frameWindow.location.href.indexOf(b.url)!=-1)||gx.grid.drawAtServer){b.close(a);return}}if(location.href.indexOf("gxCalledAsPopup")!=-1){this.closeWindowImpl();return}var c=gx.fn.getControlValue("sCallerURL");if(!gx.lang.emptyObject(c)){gx.ajax.windowClosed(-1);location.href=gx.ajax.absoluteurl(c)}else{this.closeWindowImpl()}},closeWindowImpl:function(){if(gx.util.browser.isIE()){window.close()}else{if(history.length>0){history.back()}else{window.location.assign("about:blank")}}},closeFromServer:function(a){try{if(window.parent&&window.parent.gx){if(gx.popup.ispopup()&&!(gx.grid.drawAtServer||window.parent.gx.grid.drawAtServer)){gx.fn.closeWindow(gx.json.evalJSON(a))}else{window.parent.gx.fn.closeWindow(gx.json.evalJSON(a))}return true}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","closeFromServer")}return false},invalidEmptyValue:function(b){if(gx.lang.emptyObject(b.s)){var a=b.v.length;for(var c=0;c<a;c++){if(b.v[c][0]===b.s){return false}}return true}return false},selectedDescription:function(b){var a=b.v.length;for(var c=0;c<a;c++){if(b.v[c][0]===b.s){return b.v[c][1]}}return null},setGridCheckBoxValue:function(d,a,b,c){this.setCheckBoxValue(d+"_"+a,b,c)},setGridDecimalValue:function(e,a,b,d,c){b=b.toString().replace(c,".");b=Number(b).toFixed(d);b=b.replace(".",c);return this.setGridControlValue(e,a,b)},setGridControlValue:function(d,b,a,c){return this.setControlValue(d+"_"+b,a,c)},setVarValues:function(VarIds,VarValues){var len=VarIds.length;for(var i=0;i<len;i++){var validStruct=gx.fn.vStructForVar(VarIds[i]);if(validStruct!=null){validStruct.v2v(VarValues[i])}else{eval(VarIds[i]+'="'+VarValues[i]+'"')}}},setControlValue:function(c,a,b){c=gx.csv.ctxControlId(c);this.setControlValueAny(c,a,b)},setControlValueAny:function(b,f,h){this.persistGridControlValue(b,f);var g=gx.O.getValidStructFld(b);if(g&&(g.type=="dtime"||g.type=="date")&&f===""){f=gx.date.nulldate_toc(g.len,g.dec)}if(f instanceof gx.date.gxdate){g=gx.O.getValidStructFld(b);if(!gx.lang.emptyObject(g)){var a="";if(g.type=="dtime"&&f.HasTimePart){a=f.getTimeString(g.dec>=4,g.dec>=8)}var d=gx.dateFormat;if(g.dp!=undefined&&g.len>8&&gx.dateFormat.indexOf("Y4")==-1){d=d.replace("Y","Y4")}if(g.len>0){f=f.getStringWithFmt(d)+((f.HasTimePart)?" "+a:"")}else{f=(f.HasTimePart)?a:""}}}else{if(gx.lang.instanceOf(f,Number)||(typeof(gx.num.dec)!="undefined"&&f instanceof gx.num.dec.bigDecimal)){g=gx.O.getValidStructFld(b);if(!gx.lang.emptyObject(g)&&g.pic!=undefined){f=gx.num.formatNumber(f,g.dec,g.pic,g.len,g.sign,false)}}}var j=h||0;var c=gx.dom.el(b);if((c!=null)&&(c.nodeName!="SPAN")){this.setControlValue_impl(c,f,h)}else{gx.fn.setHidden(b,f)}var e=b;if((c!=null)&&(c.nodeName=="SPAN")){e=c}this.setControlValue_span_safe(e,f,h)},setDecimalValue:function(d,a,c,b){this.setControlValue(d,a)
},toDecimalValue:function(a,c,b){return gx.num.parseFloat(a,c,b)},toDatetimeValue:function(a,b){return new gx.date.gxdate(a,b)},setCheckBoxValue:function(d,a,b){try{d=gx.csv.ctxControlId(d);var c=gx.dom.form()[d];if(c==null){c=gx.dom.byId(d)}if(c){c.checked=(a.toString()==b.toString());c.value=a}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(c,a){var d=c.lastIndexOf("_");if(d!=-1){var e=gx.O.getValidStructFld(c.substring(0,d));if(e){var b=e.gxgrid;if(b){b.persistControlValue(c,a,e)}}}},setControlValue_span_safe:function(c,a,b){if(typeof(c)=="string"){c=gx.dom.el("span_"+c)}if(c!=null){if(c.nodeName!="SPAN"){var d="span_";if(typeof(c)=="string"){d+=c}else{d+=gx.dom.id(c)}c=gx.dom.byId(d)}this.setControlValue_fmt(c,a,b)}},setControlValue_fmt:function(c,a,b){if(c!=null){if(b==1){var d=c.getAttribute("gxlink");if(!gx.lang.emptyObject(d)){if(c.firstChild!=null&&c.firstChild.nodeName=="A"){c=c.firstChild}}gx.html.setInnerHtml(c,a,true)}else{if(b==0&&typeof(a)=="string"){a=a.replace(/ +/g," ")}while(c.firstChild!=null&&c.firstChild.nodeName!="#text"){c=c.firstChild}gx.html.setInnerText(c,a,b)}}},setControlValue_impl:function(c,a,b){if(typeof(c)=="string"){c=gx.dom.el(c)}if(a instanceof gx.date.gxdate){a=a.getString()}if(c!=null){if((c!=null)&&(typeof(c.length)!="undefined")&&(typeof(c[0])!="undefined")&&(c[0].type=="radio")){this.setRadioValue(c,a);return}if(c.type=="text"||c.type=="textarea"){c.value=gx.lang.decodeValue(a)}else{if(c.value!=undefined){c.value=a}else{this.setControlValue_span_safe(c,a,b)}}}},setGridComboBoxValue:function(c,a,b){this.setComboBoxValue(c+"_"+a,b)},setComboBoxValue:function(c,m){var d=gx.util.browser.isIE();c=gx.csv.ctxControlId(c);var g=gx.dom.form()[c];if(g==null){g=gx.dom.byId(c)}if(g==null){return}var a="";var j=gx.O.getValidStructFld(c);if(!gx.lang.emptyObject(j)){a=j.type}if(a=="int"){m=gx.text.trim(m)}else{if(a=="date"&&m instanceof gx.date.gxdate){m=m.getStringWithFmt("Y4MD")}else{if(a!="decimal"){m=gx.text.rtrim(m)}}}var o=m;var f=false;try{var k=g.options.length;var n;for(var h=0;h<k;h++){var b=g.options[h];if((a=="decimal"&&gx.num.parseFloat(b.value)==m)||(b.value==m)){if(typeof(b.innerText)!="undefined"){o=b.innerText}else{o=b.text}g.selectedIndex=h;f=true;b.setAttribute("selected","selected");n=b;if(d){break}}else{if(!d){b.removeAttribute("selected")}}}if(n&&n.value!=g.value&&gx.util.browser.isFirefox()){gx.dom.redrawControl(g)}if(!f){g.selectedIndex=0}if(j.grid>0){j.gxgrid.persistControlValue(c,m,j)}}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(c,o,0)},loadComboBox:function(b,a){this.setComboValues(b,a)},setGridComboValues:function(f,e){var a=this.controlGridId(f);if(a==0){this.setComboValues(f,e)}else{for(var c=1;c<999;c++){var b=gx.text.padr(c.toString(),4,"0");var d=gx.dom.el(f+"_"+b);if(d==null){break}this.setComboValues(d.name,e)}}},setComboValues:function(g,e){var d=gx.dom.el(g);if(d==null){return}var b="";if(d.selectedIndex!=-1){b=d.options[d.selectedIndex].value
}while(d.options.length>e.length){d.remove(d.options.length-1)}while(e.length>d.options.length){var f=document.createElement("OPTION");d.options.add(f)}var a=e.length;for(var c=0;c<a;c++){var f=d.options[c];f.value=e[c][0];f.text=e[c][1];if(f.value==b){d.selectedIndex=c}}if(d.options.length==0){d.selectedIndex=-1}else{if(d.selectedIndex==-1||d.selectedIndex>d.options.length-1){d.options[0].selected=true}}},getControlRef:function(c,a){if(!a){c=gx.csv.ctxControlId(c)}if(c=="FORM"){return document}var b=gx.dom.el(c);if(b!=null){return b}b=gx.dom.el("span_"+c);if(b!=null){return b}b=gx.dom.el("Object_"+c);if(b!=null){return b}b=gx.dom.el("_"+c);if(b!=null){return b}return null},getControlRef_list:function(c){var a=gx.dom.byName(c);if(a!=null){return a}var b=gx.dom.byId(c);if(b!=null){return[b]}return null},screen_CtrlRef:function(b){var a=this.getControlGridRef(b,this.controlGridId(b));if(!gx.lang.emptyObject(a)){if(a.type=="hidden"){a=gx.dom.el("span_"+gx.dom.id(a))}return a}return null},getControlGridRef:function(a,c,d){a=gx.csv.ctxControlId(a);try{if(c==0){return gx.dom.el(a)}if(d==undefined){d=this.currentGridRow(c)}return gx.dom.el(a+"_"+d)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(c,a){if(a!="0000"){try{return gx.currentRows[c]=a}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setCurrentGridRow")}}return undefined},currentGridRowImpl:function(b){try{return gx.currentRows[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","currentGridRowImpl")}return undefined},currentGridRow:function(a){var b=this.currentGridRowImpl(a);return(b==undefined)?"0001":b},gridDuplicateKey:function(c){var a=gx.fn.validStruct(c);if(a!=undefined){var b=a.gxgrid;if(b!=null){b=b.updateControlValue(a,true);if(b){return b.gxHasDuplicateKey()}}}return false},firstGridControl:function(c){var d=gx.fn.controlIds();var a=d.length;for(i=0;i<a;i++){var b=gx.fn.validStruct(d[i]);if(b!=undefined&&b.grid==c){return d[i]}}return -1},lastGridControl:function(b){var c=gx.fn.controlIds();for(i=c.length-1;i>=0;i--){var a=gx.fn.validStruct(c[i]);if(a!=undefined&&a.grid==b){return c[i]}}return -1},getGridDecimalValue:function(d,a,c,b){return this.getDecimalValue(d+"_"+a,c,b)},getGridIntegerValue:function(c,a,b){return this.getIntegerValue(c+"_"+a,b)},getGridControlValue:function(b,a){return this.getControlValue(b+"_"+a)},getGridCheckBoxValue:function(d,a,b,c){return this.getCheckBoxValue(d+"_"+a,b,c)},getCheckBoxValue:function(d,a,c){d=gx.csv.ctxControlId(d);var b=gx.dom.form()[d];if(b==null){ControlList=gx.dom.byName(d);if(ControlList!=null){b=ControlList[0]}}if(b==null){return 0}if(b.checked){return a}return c},getControlValue:function(a){return this.getControlValue_impl(gx.csv.ctxControlId(a))},getControlValue_impl:function(f){try{var d=gx.dom.el(f);if(d!=null){if((d.type=="hidden")||(d.type=="text")||(d.type=="textarea")||(d.type=="checkbox")){return d.value}if(d.type=="radio"){return gx.fn.getRadioValue(gx.dom.byName(f))}var h=gx.O.getValidStructFld(gx.dom.id(d));
if(!gx.lang.emptyObject(h)&&(h.type!="date")&&(h.type!="dtime")&&(h.type!="bits")){return d.value}if(d.nodeName=="SELECT"&&d.options.length>0){if(d.selectedIndex!=-1){return d.options[d.selectedIndex].value}else{return d.options[0].value}}if(d.nodeName=="IMG"){return d.src}}d=gx.dom.el("span_"+f);if(d!=null){var b=gx.fn.getHidden(f);if(b!=undefined){return b}else{return gx.fn.getControlValue_span(d)}}d=gx.dom.form()[f];if(d!=null){return this.getControlValueInt(d)}d=gx.dom.byId("_"+f);if(d!=null){return d.value}ControlList=gx.dom.byName(f);if(ControlList&&ControlList.length==0){ControlList=gx.dom.byName("_"+f)}if(ControlList!=null){var a=ControlList.length;for(var c=0;c<a;c++){d=ControlList[c];if(d!=null){return this.getControlValueInt(d)}}d=ControlList[0];if(d){return d.value}}if(d==null){return gx.fn.getHidden(f)}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getControlValue_impl")}return""},setRadioValue:function(e,b){e=gx.csv.ctxControlId(e);var d=gx.dom.byName(e);if(d==null){return}var a=d.length;for(var c=0;c<a;c++){if(gx.text.ltrim(d[c].value)==gx.text.ltrim(b)){d[c].checked=true;return}}},getRadioValue:function(c){var a=c.length;for(var b=0;b<a;b++){if(c[b].checked){return c[b].value}}return""},getControlValueInt:function(b){if((b.length!=undefined)&&(b[0].type=="radio")){return this.getRadioValue(b)}if(b.type=="checkbox"){return b.checked}if(b.tagName=="SPAN"){var a=gx.fn.getHidden(gx.dom.id(b));if(a!=undefined){return a}else{return gx.fn.getControlValue_span(b)}}return b.value},getControlValue_span:function(a){while(a&&!a.nodeValue){a=a.childNodes[0]}if(a&&a.nodeValue){return a.nodeValue}return""},getDateValue:function(b){try{var a=gx.fn.getHidden(gx.csv.ctxControlId(b));if(!gx.lang.emptyObject(a)){return new gx.date.gxdate(a,"Y4MD")}return new gx.date.gxdate(this.getControlValue(b),gx.dateFormat)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(c,a){var b=0;var d=this.getControlValue(c);if(typeof(d)!="undefined"){d=d.toString()}else{d=""}if(d.length<gx.num.maxNumericPrecision()||typeof(gx.num.dec)=="undefined"){b=gx.num.parseInt(d,10,a)}else{b=new gx.num.dec.bigDecimal(d).setScale(0,gx.num.dec.ROUND_UP).toString()}return isNaN(b)?0:b},getDecimalValue:function(c,b,a){var d=gx.num.parseFloat(this.getControlValue(c),b,a);return isNaN(d)?0:d},getBlobValue:function(b){var a=gx.dom.el("Object_"+b);if(a!=null){if(a.data){return a.data}}else{a=gx.dom.el("Link_"+b);if(a!=null){return a.href}}return""},getVarControlMap:function(a){for(var c in gx.O.VarControlMap){if(typeof(c)!="function"){var b=gx.O.VarControlMap[c];if(b.id==a||(gx.O.CmpContext+b.id)==a){return c}}}return null},getVarControlMapForVar:function(b){for(var a in gx.O.VarControlMap){if(typeof(a)=="string"&&a==b){return gx.O.VarControlMap[a]}}return null},v2cMap:function(c){var b=this.getVarControlMapForVar(c);if(b!=null){var a="";if(typeof(b.grid)=="number"&&b.grid!=0){a="_"+gx.fn.currentGridRowImpl(b.grid)}gx.fn.setHidden(gx.O.CmpContext+b.id+a,gx.O[c])
}},c2vMap:function(c){var b=this.getVarControlMapForVar(c);if(b!=null){var a="";if(typeof(b.grid)=="number"&&b.grid!=0){a="_"+gx.fn.currentGridRowImpl(b.grid)}gx.O[c]=gx.fn.getHidden(gx.O.CmpContext+b.id+a)}},depsToVars:function(b){for(var a=0;a<b.length;a++){var d=b[a];var c=gx.fn.vStructForVar(d);if(!gx.lang.emptyObject(c)){c.c2v()}else{this.c2vMap(d)}}},verticalFormula:function(o,j,f,r,p,e){var n=gx.fn.vStructForVar(o);if(!gx.lang.emptyObject(n)){n.v2c()}else{this.v2cMap(o)}var l=gx.fn.currentGridRowImpl(f);var d=gx.fn.getGridObj(f);var b=0;var a=false;var k=d.grid.rows.length;for(var g=0;g<k;g++){var m=d.grid.rows[g];var c=m.gxDeleted();var h=m.gxExists();var q=m.gxIsMod();if(!c&&(h||q)){gx.fn.setCurrentGridRow(f,m.gxId);if(e&&e.length>0){this.depsToVars(e)}else{if(!gx.lang.emptyObject(n)){n.c2v()}else{this.c2vMap(o)}}if(r.call(gx.O)){a=true;b+=p()}}}gx.fn.setCurrentGridRow(f,l);if(e&&e.length>0){this.depsToVars(e)}else{if(!gx.lang.emptyObject(n)){n.c2v()}else{this.c2vMap(o)}}if(!a){b=j}return b},sumFrm:function(f,a,d,c,g,b,e){return gx.fn.verticalFormula(f,a,g,b,function(){return gx.num.parseFloat(gx.O[f],d,c)},e)},countFrm:function(d,a,e,b,c){return gx.fn.verticalFormula(d,a,e,b,function(){return 1},c)},serialRule:function(LastCountAtt,CountAtt,GridId,Inc){var CurrentRow=gx.fn.currentGridRow(GridId);var RowMode=gx.fn.getGridRowMode(gx.fn.gridLvl(GridId),GridId);if(RowMode!="INS"||gx.fn.isNewRow(GridId,CurrentRow)==false){return eval(LastCountAtt)}gx.fn.setNewRow(GridId,CurrentRow,false);var sAssignCode=gx.prefixVar(CountAtt)+"="+LastCountAtt+"+"+Inc;eval(sAssignCode);var validStruct=gx.fn.vStructForVar(CountAtt);if(validStruct){validStruct.v2c()}return eval(gx.prefixVar(CountAtt))},setReturnParms:function(f,d,c){try{if(f&&d&&c){var k=d.length;if(k==c.length){gx.setGxO(f.CmpContext,f.IsMasterPage);var m=null;for(var h=0;h<k;h++){var g=d[h];var b=c[h];var j=gx.fn.vStructForVar(g);if(j){var a=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(j.fld));if(gx.fn.isAccepted(a)){m=a}j.v2v(b);if(j.v2c!=null){j.v2c()}}else{f.setVariable(g,b)}}if(m){gx.fn.setFocus(m)}}}}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","setReturnParms")}},checkPopupFocus:function(c){if(gx.popup.ispopup()){var a=gx.popup.getPopup();if(a&&a.frameDocument){var b=(c.ownerDocument?c.ownerDocument:c.document);if(b.URL!=a.frameWindow.location.href){a.setFocusFirst();return false}}}return true},setCtrlProperty:function(c,d,a){var b=null;if(c=="FORM"){b=document}else{b=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(c))}if(b==null){return}this.setCtrlPropertyImpl(b,d,a)},setGridCtrlProperty:function(c,e,a){var b=gx.fn.screen_CtrlRef(c);if(b==null){return}this.setCtrlPropertyImpl(b,e,a);var d=b.parentElement;if(d.tagName!="TD"){return}this.setCtrlPropertyImpl(d,e,a)},setCtrlPropertyImpl:function(c,k,d){if(c==null){return}switch(k){case"Caption":this.setCtrlCaption(c,d);break;case"Tooltiptext":c.title=d;break;case"Visible":if(c.nodeName=="INPUT"&&c.type=="button"){this.setButtonVisibility(c,!this.propertyValueFalse(d))
}else{if(c.nodeName=="INPUT"&&c.type=="checkbox"){if(c.parentNode.nodeName=="SPAN"){c=c.parentNode}}var n="";var m=this.propertyValueFalse(d);if(m){n="none"}else{if(c.style.display=="none"){n=this.displayByType(c.nodeName)}}if(n!=""){c.style.display=n}gx.fn.showHideDatepicker(c,!m)}gx.fn.checkAttachedProperty(c.id,k,d);break;case"Enabled":var m=this.propertyValueFalse(d);if(c.type=="text"||c.type=="textarea"||c.tagName=="SELECT"){var q=gx.dom.el("span_"+c.id);if(q){q.style.display=(!m)?"none":"inline";c.style.display=(m)?"none":"inline";gx.fn.showHideDatepicker(c,!m)}gx.fn.checkAttachedProperty(c.id,k,d)}if(c.type=="hidden"){return}if(c.tagName=="SPAN"&&m){return}if(c.nodeName=="INPUT"&&c.type=="radio"){var p=gx.dom.byName(gx.dom.id(c));var h=p.length;for(var f=0;f<h;f++){this.setEnabledProperty(p[f],!m)}return}this.setEnabledProperty(c,!m);break;case"Class":this.setCtrlClass(c,d);break;case"Link":this.setCtrlLink(c,d);break;case"Linktarget":this.setCtrlLinkTarget(c,d);break;case"Backcolor":var l=gx.color.html(d);if(l&&c.gxGridName==undefined){c.style.backgroundColor=l.Html}break;case"Forecolor":var l=gx.color.html(d);if(l){c.style.color=l.Html}break;case"Fontbold":var m=this.propertyValueFalse(d);c.style.fontWeight=(m?"normal":"bold");break;case"Fontitalic":var m=this.propertyValueFalse(d);c.style.fontStyle=(m?"normal":"italic");break;case"Fontunderline":var m=this.propertyValueFalse(d);c.style.textDecoration=(m?"none":"underline");break;case"Fontstrikethru":var m=this.propertyValueFalse(d);c.style.textDecoration=(m?"none":"line-through");break;case"Fontname":c.style.fontFamily=d;break;case"Fontsize":c.style.fontSize=d;break;case"Filetype":this.setBlobFiletype(c,d);break;case"URL":this.setBlobUrl(c,d);break;case"Bitmap":c.src=d;break;case"Jsonclick":c.jsevent=d;break;case"Source":if(d.indexOf(":")==-1&&d.indexOf("/")==-1){c.src=gx.ajax.objectUrl(d)}else{c.src=gx.util.resourceUrl(d,true)}gx.evt.attach(c,"load",gx.dom.autofitIFrame);break;case"Values":if((c.tagName=="SELECT")||(c.tagName=="SPAN")){d=gx.json.evalJSON(d);if(c.tagName=="SELECT"){gx.fn.loadComboBox(c.id,d.v);gx.fn.setComboBoxValue(c.id,d.s)}else{var b=c.id.substring(5);var a="";var j=d.s;var g=gx.O.getValidStructFld(b);if(!gx.lang.emptyObject(g)){a=g.type}if(a=="int"){j=gx.text.trim(j)}else{j=gx.text.rtrim(j)}d.s=j;gx.fn.setControlValue_span_safe(b,gx.fn.selectedDescription(d))}}break;case"Width":if(c.width){c.width=d}c.style.width=this.convertSize(d);break;case"Height":if(c.height){c.height=d}c.style.height=this.convertSize(d);break}var e=gx.dom.id(c);if(e){var o=e+"_"+k;if(gx.fn.isHidden(o)){gx.fn.setHidden(o,d)}}},convertSize:function(a){if(gx.lang.instanceOf(a,Number)||(a.indexOf("%")==-1&&a.indexOf("px")==-1)){return a+"px"}else{return a}},setEnabledProperty:function(d,a){var c=gx.dom.id(d);if(gx.csv.validating==true){if(a&&gx.csv.validActivatedControl==null&&d!=gx.csv.lastControl){var b=gx.O.getValidStructId(c);if(b>gx.csv.fromValid&&b<=gx.csv.toValid){gx.csv.validActivatedControl=d
}}}if(!a){gx.util.addOnce(gx.disabledControls,d,c)}else{delete gx.disabledControls[c]}d.gxusrdisabled=(!a);if(d.gxdisabled){if(d.gxdisabled==true){d.disabled=true}else{d.disabled=d.gxusrdisabled}}else{d.disabled=d.gxusrdisabled}},showHideDatepicker:function(b,a){var c=gx.dom.el(gx.dom.id(b)+"_dp_container");if(c){c.style.display=(a)?"block":"none"}},getGridCtrlProperty:function(a,b,g){try{if(a!=0){var f=this.getGridObj(a);if(f){var c=f.grid.getColumnByHtmlName(b);if(c){return c[g.toLowerCase()]}}}else{return this.getCtrlProperty(b,g)}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(b,c){var a=this.screen_CtrlRef(b);if(a==null){return}return this.getCtrlProperty_impl(a,c)},getCtrlProperty_impl:function(b,c){if(b==null){return""}switch(c){case"Tooltiptext":return b.title;case"Visible":return b.style.display!="none";case"Enabled":return b.disabled==0;case"Class":return b.className;case"Backcolor":return gx.color.css(b.style.backgroundColor);case"Forecolor":return gx.color.css(b.style.color);case"Width":return gx.dom.dimensions(b).w;case"Height":return gx.dom.dimensions(b).h;case"Caption":return this.getCtrlCaption(b);case"Fontbold":return(b.style.fontWeight=="bold");case"Fontitalic":return(b.style.fontStyle=="italic");case"Fontunderline":return(b.style.textDecoration=="underline");case"Fontstrikethru":return(b.style.textDecoration=="line-through");case"Fontname":return b.style.fontFamily;case"Fontsize":var a=parseInt(b.style.fontSize);if(isNaN(a)){return 12}return a}},displayByType:function(a){switch(a){case"TABLE":if(!gx.util.browser.isIE()||(gx.util.browser.ieVersion()>=8)){return"table"}return"block";case"P":case"DIV":return"block"}return"inline"},setCtrlCaption:function(c,a){try{switch(c.tagName){case"SPAN":case"DIV":case"FIELDSET":var b=c.getAttribute("gxformat");if(b==null){b=0}gx.fn.setControlValue_fmt(c,a,b);return;case"INPUT":if(c.type!="checkbox"){c.value=a}return}if(c.nodeName=="#document"){c.title=a}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(b){switch(b.tagName){case"SPAN":case"DIV":case"FIELDSET":var a=b.getAttribute("gxformat");if(a!=null&&a=="1"){return b.innerHTML}else{while(b.firstChild!=null&&b.firstChild.nodeName!="#text"){b=b.firstChild}if(typeof(b.innerText)!="undefined"){return b.innerText}return b.text}case"INPUT":if(b.type!="checkbox"){return b.value}break;default:return""}},propertyValueFalse:function(a){if(typeof(a)=="string"){a=a.toLowerCase();if((a=="false")||(a=="0")){return true}}return(a==0)},setButtonVisibility:function(d,c){var f=c?"":"none";var a=d.parentNode;if(!gx.lang.emptyObject(a)&&a.nodeName=="SPAN"){a.style.display=f;var g=a.parentNode;if(!gx.lang.emptyObject(g)&&g.nodeName=="SPAN"){g.style.display=f;var b=g.parentNode;if(!gx.lang.emptyObject(b)&&b.nodeName=="SPAN"){b.style.display=f;var e=b.parentNode;if(!gx.lang.emptyObject(e)&&e.nodeName=="SPAN"){e.style.display=f}}}}d.style.display=f},setBlobValue:function(c,a){var b=gx.dom.el(c)||gx.dom.el("Object_"+c);
this.setBlobUrl(b,a)},setBlobFiletype:function(c,a){if(c!=null){var b=c;if(b.nodeName=="INPUT"&&b.type=="file"){b=gx.dom.el("Object_"+c.id)}if(b!=null){a=gx.util.getContentType(a);this.setObjectCtrlType(b,a)}}},setBlobUrl:function(d,a){if(!a.match(/^[a-z]:[\S]*/i)){if(d!=null){var c=d;if(c.nodeName=="INPUT"&&c.type=="file"){c=gx.dom.el("Object_"+d.id)}if(c!=null){var b=gx.util.getContentTypeFromExt(a);c=this.setObjectCtrlType(c,b)}if(c!=null){if(c.tagName=="IMG"){if(a==""){a=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"blank.jpg",true)}c.src=a}else{if(a==""){a="about:blank"}c.data=a;this.resizeObject(c)}gx.dom.redrawControl(c)}else{c=gx.dom.el("Link_"+d.id);if(c!=null){if(a!=""){c.style.display="block"}else{c.style.display="none"}c.href=a}}this.setFileSource(d,"")}}},setFileSource:function(b,a){if((b.tagName=="INPUT")&&(b.type=="file")){if(b.src!=undefined){b.src=a}else{b.value=a}gx.dom.redrawControl(b)}},setObjectCtrlType:function(a,g){var f=a;if(a.nodeName=="IMG"&&g.indexOf("image/")==0){return f}if((a.type!=g)||(a.nodeName=="OBJECT"&&g.indexOf("image/")==0)){if(g.indexOf("image/")==0){f=gx.html.nodesFromText('<img id="'+a.id+'">')[0]}else{f=gx.html.nodesFromText('<object id="'+a.id+'" type="'+g+'">')[0]}if(f){try{for(var c in a.attributes){if(c!="id"&&c!="type"&&c!="implementation"){if(a[c]){try{f[c]=a[c]}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setObjectCtrlType")}}}}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setObjectCtrlType")}var b=a.parentNode;if(b){var d=null;var h=b.childNodes.length;for(i=0;i<h;i++){if(b.childNodes[i]==a){if(i<h-1){d=b.childNodes[i+1]}break}}b.removeChild(a);if(d!=null){b.insertBefore(f,d)}else{b.appendChild(f)}}}}return f},resizeObject:function(b){var a=gx.lang.emptyObject;if(!a(b.data)&&b.data!="about:blank"){if(a(b.width)&&a(b.height)&&a(b.style.width)&&a(b.style.height)){b.style.width="200px";b.style.height="200px"}}},checkboxClick:function(a,d,c,b){if(d.checked){d.value=c}else{d.value=b}var e=gx.fn.validStruct(a);if(e){e.c2v()}},setCtrlClass:function(b,a){if(b==null){return}b.className=a},setCtrlLink:function(c,a){if(c==null){return}if(a==""){this.unsetCtrlLink(c);return}var b=c.firstChild;if(b&&b.tagName=="A"){b.href=a}else{var e=c.parentNode;if(e.tagName=="A"){e.href=a}else{var d=document.createElement("A");d.href=a;if(b&&b.nodeName=="#text"){d.innerHTML=b.nodeValue;c.replaceChild(d,b)}else{e.replaceChild(d,c);d.appendChild(c)}}}},unsetCtrlLink:function(b){if(b==null){return}var c=b.parentNode;if(c.tagName=="A"){var a=c.firstChild;ParentTag2=c.parentNode;if(ParentTag2!=null){while(a!=null){ParentTag2.insertBefore(a,c);a=c.firstChild}ParentTag2.removeChild(c)}}},setCtrlLinkTarget:function(a,b){if(a==null){return}if(a.nodeName=="SPAN"&&a.firstChild){a=a.firstChild}if(a.nodeName=="A"){if(a.setAttribute){a.setAttribute("target",b)}else{a.target=b}}},isVisible:function(a){try{while(a){if(a.style&&(a.style.visibility=="hidden"||a.style.display=="none")){return false}a=a.parentNode}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","isVisible")
}return true},gridRowIsMod:function(h,c){var b=this.gridObjByLvl(h);var f=null;if(b){var f=b.grid.getRowByGxId(c);if(f){return f.gxIsMod()}return true}var a=false;try{var g=this.getControlValue("nIsMod_"+h+"_"+c);a=(g==1)}catch(d){a=false}return a},gridObjByLvl:function(d){var b=gx.O.Grids;var a=b.length;for(var c=0;c<a;c++){if(b[c].gridLvl==d){return b[c]}}return null},forceEnableControls:function(f){for(var c in gx.disabledControls){c=this.getControlRef_list(c);var a=c.length;for(var b=0;b<a;b++){try{if(c[b].type!="button"&&c[b].type!="submit"){c[b].disabled=f}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","forceEnableControls")}}}},alert:function(c,b){try{var a=gx.util.balloon.getNew(c.id);a.setError(b);a.show();gx.csv.invalidForcedCtrl=c}catch(d){alert(b)}},getGridRowMode:function(b,d){var e=this.currentGridRow(d);var a=this.rowIsRemoved(d,e);var c=this.getControlValue("nRcdExists_"+b+"_"+e);if(a=="1"){return"DLT"}if(c=="0"){return"INS"}return"UPD"},rowIsRemoved:function(c,d){var a=this.getGridObj(c);if(a!=null){var b=a.grid.getRowByGxId(d);if(b){return b.gxDeleted()}}return"0"},getGridObj:function(a){return gx.O.getGridById(a)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},initOld:function(a){if(gx.oldValues[a.id]==undefined){gx.oldValues[a.id]=a.value}},setFocusOnError:function(c){var a=gx.fn.controlGridId(c);var d=gx.csv.ctxControlId(c);var b=null;if(a==0){b=gx.dom.el(d)}else{b=gx.fn.getControlGridRef(d,a)}if(b!=null){gx.O.AnyError=1;gx.csv.anyError=true;b.setAttribute("gxvalid","0");gx.fn.setFocus(b)}},usrSetFocus:function(b){b=gx.csv.ctxControlId(b);var a=gx.dom.el(b);if(a!=null){gx.fn.setFocus(a)}},setFocus:function(a){if(a){try{if(gx.popup.ispopup()){if(gx.util.browser.isIE()&&window.parent.document.selection){window.parent.document.selection.empty()}else{if(window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur){window.parent.gx.csv.lastControl.blur()}}}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setFocus")}try{try{if(!gx.lang.emptyObject(a.id)){a=gx.dom.byId(a.id);gx.fn.setFocusSafe(a)}else{gx.fn.setFocusSafe(a)}}catch(b){gx.fn.setFocusSafe(a)}gx.fn.setSelection(a);a.forcedFocus=true}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(a){if(gx.util.browser.isFirefox()){gx.lang.doCallTimeout(a.focus,a,[],100)}else{a.focus()}},setFocusOnload:function(){var c=null;var a=gx.pO.getUserFocus();if(!gx.lang.emptyObject(a)){if(a=="notset"){return}var b=gx.pO.getUserControl(gx.uc.userControlContainerId(a));if(!gx.lang.emptyObject(b)){b.setFocusBase();return}else{gx.csv.userFocus=gx.fn.getControlRef(a)}}if(gx.csv.userFocus=="notset"){return}c=gx.csv.userFocus;if(!gx.fn.isAccepted(c)){if(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)){c=gx.csv.lastActiveControl}else{var d=gx.fn.firstAcceptedControl(gx.popup.ispopup());c=d}}try{if(c){gx.csv.lastControl=c;if(gx.fn.isAccepted(c)){gx.fn.setFocus(c)}else{gx.popup.setFocus()}}else{gx.popup.setFocus()
}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocusOnload")}},setSelection:function(a){if(a&&gx.fn.isVisible(a)){try{gx.csv.lastControl=a;if(a.type=="text"||a.type=="password"||a.type=="file"){a.select()}else{if(a.nodeName=="TEXTAREA"||a.nodeName=="SELECT"){a.focus()}else{if(typeof(document.selection)!="undefined"){setTimeout(function(){document.selection.empty()},100)}}}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}}},isAccepted:function(b){var e=true;if(b!=null&&b.type!=undefined&&b.type!="hidden"&&gx.fn.isVisible(b)&&b.disabled==false&&(b.readOnly==null||b.readOnly==false)){var c=gx.dom.id(b);var d=gx.O.getValidStructFld(c);var a=gx.getVar("Gx_mode");if(gx.csv.lastGrid>0){gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid))}if(!gx.lang.emptyObject(d)&&d.nac){e=(d.nac.call(gx.O)==false)}else{e=true}gx.setVar("Gx_mode",a)}else{e=false}return e},enterHasFocus:function(){gx.csv.lastControl;if(gx.csv.lastControl==null){return false}return gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(c){var a=gx.fn.getControlIndex(gx.csv.lastControl);if(a==-1){return true}var b=null;for(b=gx.fn.searchFocus(++a,true);;b=gx.fn.searchFocus(++a,true)){if(b==null||a==gx.dom.form().elements.length){a=-1}else{if(c){break}if(gx.evt.isEnterEvtCtrl(b)){break}if(b.nodeName=="INPUT"&&b.type!="submit"&&b.type!="button"&&b.type!="image"){break}}}gx.fn.setFocus(b)},getControlIndex:function(b){var a=gx.dom.form().elements.length-1;var c=0;el=this.controlIndex(b,c,a);return el},controlIndex:function(d,g,c){if(!document.all){return d.gxIndex}else{var f=gx.dom.form();var e=f.elements[g].sourceIndex;var a=f.elements[c].sourceIndex;var h=parseInt(g+((c-g)/2))+1;var b=f.elements[h].sourceIndex;if((g==c)&&(d.sourceIndex==e)&&(d.sourceIndex==a)){return g}if(d.sourceIndex==e){return g}if(d.sourceIndex==a){return c}if(d.sourceIndex==b){return h}if((d.sourceIndex>b)&&(d.sourceIndex<a)){return this.controlIndex(d,h+1,c-1)}if((d.sourceIndex>e)&&(d.sourceIndex<b)){return this.controlIndex(d,g+1,h-1)}}},searchFocus:function(b,a){if(a){return this.searchFocusFwd(b)}return this.searchFocusBack(b)},searchFocusBack:function(b){var c=gx.dom.form();for(var a=b;a>=0;a--){if(gx.fn.isAccepted(c.elements[a])){return c.elements[a]}}return null},searchFocusFwd:function(c){var d=gx.dom.form();var a=d.elements.length;for(var b=c;b<a;b++){if(gx.fn.isAccepted(d.elements[b])){return d.elements[b]}}return null},rowGridId:function(a){if(!a||!a.getAttribute){return null}var b=a.getAttribute("gxgridid");if(b!=null){return b}return gx.fn.rowGridId(a.parentNode)},controlRowId:function(a){if(!a||!a.getAttribute){return null}var b=a.getAttribute("gxrow");if(b!=null){return b}return gx.fn.controlRowId(a.parentNode)},controlGridId:function(b){try{var f=gx.fn.controlIds();var a=f.length;for(i=0;i<a;i++){var c=gx.fn.validStruct(f[i]);if(c!=undefined&&c.fld==b){return c.grid}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","controlGridId")}return 0},oldGridId:function(b){try{var f=gx.fn.controlIds();
var a=f.length;for(i=0;i<a;i++){var c=gx.fn.validStruct(f[i]);if(c!=undefined&&c.gxold==b){return c.grid}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(a,b){var c="no_mode";if(gx.csv.validatingGrid!=null){if(this.isLvlParmOld(gx.csv.lastGrid,a)){c=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)}}else{if(this.isLvlParmOld(0,a)){c=gx.O.Gx_mode}}if(c=="no_mode"){return true}if((c=="UPD")||(gx.csv.validatingGrid==null)){window[a]=b;return true}return false},isLvlParmOld:function(f,a){try{var c=gx.O.getOldLvl(a);if(c>=0){if(f>0){var b=gx.fn.gridLvl(f);return(c<b)}return true}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","isLvlParmOld")}return false},gridLvl:function(d){try{var f=gx.fn.controlIds();var a=f.length;for(i=0;i<a;i++){var b=gx.fn.validStruct(f[i]);if(b!=undefined&&b.grid==d){return b.lvl}}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(f){try{var d=gx.fn.controlIds();var a=d.length;for(i=0;i<a;i++){var b=gx.fn.validStruct(d[i]);if(b!=undefined&&b.lvl==f){return b.grid}}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(d){try{var c=gx.fn.controlIds();for(i=0;i<c.length;i++){var b=gx.fn.validStruct(c[i]);if(b!=undefined&&b.fld==d){return c[i]}}}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(b,d){try{var c=null;if(d){c=[]}var h=gx.fn.controlIds();var a=h.length;for(i=0;i<a;i++){var g=gx.fn.validStruct(h[i]);if(g!=undefined&&b(g)){g.id=h[i];if(d){c.push(g)}else{return g}}}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getVStruct")}return c},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==a})},vStructForVarWId:function(c,b){var e=gx.fn.getVStruct(function(g){return g.gxvar==c},true);var f=e[0];var a=e.length;if(a>1){for(var d=0;d<a;d++){f=e[d];if(f.id==b){break}}}return f},vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(d,a){var c=gx.fn.lastCtrlId();for(var b=d;b<c;b++){var e=gx.fn.validStruct(b);if(e!=undefined&&e.grid!=a){return b}}return c},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,c){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(c)]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","oldGridKey")}return""},setKey:function(a,b){if(a!=null){gx.oldKeyValues[a]=b}},unsetKey:function(a){if(a!=null){gx.oldKeyValues[a]=undefined}},setGridKey:function(a,b,c){if(a!=null){gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=c}},unsetGridKey:function(a,b){if(a!=null){gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=undefined}},removeGridRow:function(j,g){var b=gx.fn.rowIsRemoved(g,j);try{var h=gx.fn.controlIds();var a=h.length;for(i=0;i<a;i++){var d=gx.fn.validStruct(h[i]);if(d!=undefined&&d.grid==g){var c=gx.dom.el(d.fld+"_"+j);if(c!=null){c.gxdisabled=b
}}}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(g,j)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(a){return gx.O.getValidStruct(a)},lastCtrlId:function(){return gx.O.getLastControlId()},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(c){try{var a=gx.fn.vStructsArray();var b=gx.fn.controlIds();var j=b.length;for(var f=0;f<j;f++){var g=a[b[f]];if(g!=null){var d=gx.fn.getControlGridRef(g.fld,g.grid);if((d!=null)&&gx.fn.isAccepted(d)){return d}}}if(c){var h=gx.dom.byTag("input");j=h.length;if(!j){return null}for(var f=0;f<j;f++){var d=h[f];var l=d.getAttribute("type").toLowerCase();if((l=="submit")||(l=="image")||(l=="button")){return d}}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","firstAcceptedControl")}return null},setNewRow:function(c,a,b){if(gx.newRows[c]==null){gx.newRows[c]=[]}gx.newRows[c][a]=b},enableDisableDelete:function(){var a=gx.dom.el(gx.csv.cmpCtx+"BTN_DELETE");if(a!=null){gx.fn.setCtrlPropertyImpl(a,"Enabled",(gx.getVar("Gx_mode")=="INS")?0:1)}},setFocusAfterLoad:function(){if(gx.csv.validating==true){return}gx.csv.invalidateForm();gx.csv.onloadFocus=true;if(!gx.lang.emptyObject(gx.usrFocusControl)){gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl))}else{if(!gx.lang.emptyObject(gx.csv.lastControl)){gx.fn.setFocus(gx.csv.lastControl)}else{gx.fn.setFocus(gx.fn.firstAcceptedControl())}}gx.csv.onloadFocus=false},isNewRow:function(c,a){try{return gx.newRows[c][a]}catch(b){return true}},disableCtrl:function(d){try{var c=gx.fn.getControlRef_list(d);if(c==null){return}var a=c.length;for(var b=0;b<a;b++){gx.fn.setCtrlPropertyImpl(c[b],"Enabled",0)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","disableCtrl")}},refreshFormBC:function(a,b){try{var d=gx.O.getFormBC(a);if(typeof(d)!="undefined"){gx.O.bcToScreen(d,b);gx.setVar(a,b);gx.fn.setGridHidden(a,b);return true}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","refreshFormBC")}return false},isHidden:function(a){if(gx.http.viewState==null){gx.http.loadState()}return(typeof(gx.http.viewState[a])!="undefined")},getHidden:function(a){if(gx.http.viewState==null){gx.http.loadState()}return gx.http.viewState[a]},setHidden:function(a,b){if(gx.http.viewState==null){gx.http.loadState()}gx.http.viewState[a]=b},setGridHidden:function(a,b){var c=a;var d=gx.fn.oldGridId(a);if(d>0){c=a+"_"+gx.fn.currentGridRowImpl(d)}gx.fn.setHidden(c,b)},deleteHidden:function(HiddenName){if(gx.http.viewState!=null){try{eval("delete gx.http.viewState."+HiddenName+";")}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","deleteHidden")}}},setPostHiddens:function(b){for(var a in b){gx.fn.setGridHidden(a,b[a])}},setPostValues:function(c){if(!c){return}var a=gx.O;var f=c.length;for(var d=0;d<f;d++){var j=c[d];var h=j.CmpContext;var e=gx.lang.booleanValue(j.IsMasterPage);gx.setGxO(h,e);if(!gx.lang.emptyObject(gx.O)){for(var g in j){if(g=="CmpContext"||g=="IsMasterPage"){continue}if(typeof(j[g])=="object"){if(gx.fn.refreshFormBC(g,j[g])){continue}}if(typeof(j[g])!="function"){var k=gx.fn.vStructForVar(g);
if(k!=null){k.v2v(j[g]);if(k.v2c!=null){k.v2c()}}else{if(g=="GX_FocusControl"){if((a.CmpContext==h)&&(a.IsMasterPage==e)){gx.usrFocusControl=j[g]}}else{var b=gx.fn.getVarControlMap(g);if(!gx.lang.emptyObject(b)){gx.setVar(b,j[g])}else{gx.setVar(g,j[g])}gx.fn.setGridHidden(g,j[g])}}}}}}gx.setGxO(a.CmpContext,a.IsMasterPage)},setPostProperties:function(k){if(!k){return}var a=gx.O;var h=k.length;for(var f=0;f<h;f++){var e=k[f];var l=e.CmpContext;var g=gx.lang.booleanValue(e.IsMasterPage);gx.setGxO(l,g);if(!gx.lang.emptyObject(gx.O)){for(var c in e){if(c=="CmpContext"||c=="IsMasterPage"){continue}if(gx.uc.isUserControl(c)){gx.uc.setProperties(c,e[c])}else{if(typeof(e[c])!="function"){var b=gx.fn.getControlRef(c,true);for(var j in e[c]){if(typeof(e[c][j])=="object"){for(var d in e[c][j]){gx.fn.setCtrlPropertyImpl(b,d,e[c][j][d])}}else{gx.fn.setCtrlPropertyImpl(b,j,e[c][j])}if(j=="Filetype"||j=="URL"){b=gx.fn.getControlRef(c,true)}}}}}}}gx.setGxO(a.CmpContext,a.IsMasterPage)},loadPostGrids:function(j){if(j!=undefined){var f=j.length;for(var d=0;d<f;d++){try{var k=j[d];if(k.Count!=undefined){var h=k.CmpContext;var c=k.GridName;var a=gx.csv.validatingGrid;if(gx.lang.emptyObject(a)||((a.gxComponentContext!=h)&&(a.gridName!=c))){var b=(k.InMasterPage=="true")?true:false;gx.fn.gridObj(h,c,b).loadGrid(k,true)}}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","loadPostGrids")}}}},getErrorViewerCtrls:function(){var d=gx.dom.byName("gxErrorViewer");if(d.length==0){d=[];var c=gx.dom.byTag("span");var a=c.length;for(var b=0;b<a;b++){if(c[b].name=="gxErrorViewer"){d.push(c[b])}}}return d},setErrorViewer:function(a){gx.O.AnyError=0;if(!a){return}try{gx.fx.obs.notify("gx.onmessages",[a]);for(var m in a){var c=a[m];if(m=="MAIN"){m=""}var h=gx.dom.byId(m+"gxErrorViewer");if(h&&typeof(c)!="undefined"){var g="";var p="";var o={};for(var k in c){var f=c[k];if(f&&f.type==1){gx.O.AnyError=1}if(!gx.lang.emptyObject(f.text)){if(typeof(f)!="function"){if(f.att!=""){var n=o[f.att];if(!n){n=gx.util.balloon.getNew(f.att);o[f.att]=n}if(f.type==1){n.setError(f.text)}else{n.setMessage(f.text)}}else{g+=p+'<span align="left">'+f.text+"</span>";p="<BR/>"}}}}for(var l in o){var n=o[l];if(n.show()==false){gx.fn.setFocusOnError(l);break}}if(h.innerHTML!=g){h.innerHTML=g;if(g!=""){var d=gx.fx.dom.highlight(h,[255,255,165],2500);d.play()}}}}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(b){var c=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/;var a=c.exec(b);if(a){return a[1]+a[2]}return b},setPostComponents:function(b,k,q){try{var p=[];var l=false;var a=gx.gen.isDotNet();for(var r in b){if(typeof(b[r])!="function"){try{var c=b[r];var n=gx.dom.el(r);if(!n&&k){n=gx.dom.el(k[r])}if(!gx.lang.emptyObject(n)){gx.html.setInnerHtml(n,c);var g=gx.fn.cmpContextFromCtrl(r);var o=gx.fn.getHidden(g+"_CMPPGM");var f=o.split(".");var d=f.length;if(a&&(d>1)){o=f[d-2].toLowerCase()}else{o=f[d-1].toLowerCase()}p.push({type:g,name:o,html:c})}}catch(h){l=true;
gx.dbg.logEx(h,"gxfrmutl.js","setPostComponents")}}}}catch(h){l=true;gx.dbg.logEx(h,"gxfrmutl.js","setPostComponents")}if((p.length==0||l)&&typeof(q)=="function"){q()}else{var m=null;var j=function(){if(p.length>0){m=p.shift();gx.fn.createComponentAsync(m,j)}else{if(typeof(q)=="function"){q()}}};m=p.shift();gx.fn.createComponentAsync(m,j)}},createComponentAsync:function(b,g){var a=b.type;var d=b.name;var f=b.html;try{if(!gx.cache.codeLoaded(a+d)){gx.cache.addInlineCode(a+d);gx.html.processCode(f,false,function(e,h){gx.fn.createComponentObj(e,h);if(typeof(g)=="function"){g();return}},[d,a],d)}else{gx.fn.createComponentObj(d,a);if(typeof(g)=="function"){g()}}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","createComponentAsync");if(typeof(g)=="function"){g()}}},createComponentObj:function(c,a){var b=gx.createComponent(c,a);if(b!=null){gx.addComponent(b)}},getAttachedCtrl:function(d){var a=gx.attachedControls.length;for(var c=0;c<a;c++){var b=gx.attachedControls[c];if(b.id==d){return b}}return null},attachCtrl:function(c,b){var a=gx.fn.getAttachedCtrl(c);if(a==null){gx.attachedControls.push({id:c,info:b})}},doAttachs:function(){var g=gx.fn.attachedControls();var f=g.length;var a=gx.O;for(var b=0;b<f;b++){var k=g[b];gx.setGxO(k.info.wc,k.info.mp);if(k.info.isPrompt&&gx.O.isTransaction()&&gx.O.Gx_mode=="DSP"){gx.fn.setCtrlPropertyImpl(gx.dom.el(k.info.wc+k.id),"Visible",false)}else{var h=k.info.controls;var c=h.length;for(var d=0;d<c;d++){gx.fn.addAttach(h[d],k);var e=gx.fn.validStruct(h[d]).fld;gx.fn.checkAttachedProperty(e,"Visible",false);gx.fn.checkAttachedProperty(e,"Enabled",false)}}}gx.setGxO(a.CmpContext,a.IsMasterPage)},addAttach:function(a,b){var c=gx.fn.validStruct(a);if(c.attachedCtrls==undefined){c.attachedCtrls=[]}c.attachedCtrls.push(b)},checkAttachedProperty:function(c,e,b){var g=gx.O.getValidStructFld(c);if(g==undefined){return}var f=g.attachedCtrls;if(f==undefined){return}var a=f.length;for(var d=0;d<a;d++){gx.fn.checkAttachedControlProperty(f[d],e,b)}},checkAttachedControlProperty:function(f,e,c){var a=f.id;f=f.info;var g=false;var h=f.controls;var j=f.wc;var d=h.length;for(var b=0;b<d&&!g;b++){if(gx.fn.getCtrlProperty_impl(gx.dom.el(j+gx.fn.validStruct(h[b]).fld),e)==c){g=((c==true)||(b==d-1))}}if(g){gx.fn.setCtrlPropertyImpl(gx.dom.el(j+a),e,c)}},changeControlOpacity:function(d,f,a,c){var b=Math.round(c);var e="";if(typeof(d)=="string"){e=d}else{e=d.id}if(f>a){gx.fn.setOpacity(f,e);setTimeout(function(){gx.fn.changeControlOpacity(d,f-10,a,c)},b)}else{if(f<a){gx.fn.setOpacity(f,e);setTimeout(function(){gx.fn.changeControlOpacity(d,f+10,a,c)},b)}else{gx.fn.setOpacity(a,e)}}},setOpacity:function(a,b){var d=b;if(typeof(b)=="string"){if(b=="body"){d=document.body}else{d=gx.dom.el(b)}}if(d!=null){var c=d.style;c.opacity=(a/100);c.MozOpacity=(a/100);c.filter="alpha(opacity="+a+")"}},fadeControl:function(b,c,a){if(c=="in"){gx.fn.changeControlOpacity(b,0,100,a)}else{gx.fn.changeControlOpacity(b,100,0,a)}},fadeIn:function(b,a){gx.fn.fadeControl(b,"in",a)
},statusMsg:function(a){window.status=a},objectOnload:function(){if(gx.pO!=null){gx.pO.onload();gx.setGxO(gx.pO.CmpContext,gx.pO.IsMasterPage)}},objectOnUnload:function(){if(gx.pO!=null){gx.pO.onunload()}},objectOnpost:function(){if(gx.pO!=null){gx.pO.onpost()}},objectPostback:function(){if(gx.pO!=null){gx.pO.postbackLoad()}},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,a,gx.O.IsMasterPage)},gridObj:function(b,a,c){return gx.getObj(b,c).getGrid(a)},installComponents:function(){var e=gx.fn.getHidden("GX_CMP_OBJS");if(e!=undefined){var c=gx.gen.isDotNet();for(var g in e){var a=e[g].toLowerCase();var f=a.split(".");var b=f.length;if(c&&(b>1)){a=f[b-2]}else{a=f[b-1]}var d=gx.createComponent(a,g);if(d!=null){gx.addComponent(d);setTimeout(function(){gx.fn.addComponentRemoteFiles(g)},1)}}}},addComponentRemoteFiles:function(c){var d=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})/;var a=d.exec(c);var b=gx.dom.el(a[1]+"gxHTMLWrp"+a[2]);if(b!=null){gx.html.processCode(b.innerHTML,true);gx.dom.fitToParent(b)}},datePickerFormat:function(b,e,f){var h=gx.dateFormat;var d=h.substr(0,1);var c=h.substr(1,1);var a=h.substr(2,1);var l=gx.fn.datePickerDateFormat(d,b);var k=gx.fn.datePickerDateFormat(c,b);var j=gx.fn.datePickerDateFormat(a,b);var g=gx.fn.datePickerTimeFormat(e);if(f>0&&e>0){return l+"/"+k+"/"+j+" "+g}else{if(f>0){return l+"/"+k+"/"+j}else{return g}}},datePickerDateFormat:function(a,b){if(a=="Y"&&b.substr(0,10)=="99/99/9999"){return"%Y"}else{if(a=="Y"){return"%y"}else{if(a=="M"){return"%m"}else{if(a=="D"){return"%d"}else{return""}}}}},datePickerTimeFormat:function(c){var a=gx.timeFormat;var b,d,e;if(a==12){b="%I";d=" %p"}else{if(a==24){b="%H";d=""}else{b="";d=""}}if(c==2){e=""}else{if(c==5){e=":%M"}else{if(c==8){e=":%M:%S"}else{return""}}}return b+e+d},installDatePicker:function(e,d,b,c,f,a){gx.html.onTypeAvailable("Calendar",gx.fn.installDatePickerIfReady,[e,d,b,c,f,a])},installDatePickerIfReady:function(f,e,b,d,g,a){var c=gx.dom.el(f);if(!gx.lang.emptyObject(c)&&c.nodeName=="SELECT"){return}if(e==0){Calendar.setup({inputField:f,showsTime:b,weekNumbers:d,mondayFirst:g,ifFormat:a,button:f+"_dp_trigger",onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:true})}else{if(!gx.lang.emptyObject(c)){c.style.display="none"}Calendar.setup({inputField:f,showsTime:b,weekNumbers:d,mondayFirst:g,ifFormat:a,flat:f+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:true})}},datePickerChanged:function(e,c,f){if(e&&e.dateClicked){if(!f){f=e.params.inputField}var h=gx.O;var j=null;var d=gx.fn.controlIds();var g=d.length;for(i=0;i<g;i++){j=gx.fn.validStruct(d[i]);var a=(j.grid!=0)?"_"+gx.fn.currentGridRow(j.grid):"";var k=h.CmpContext+j.fld+a;if(f.id==k){break}}if((j!=null)&&(j.dp!=undefined)){var b=e.date.print(gx.fn.datePickerFormat(j.dp.pic,j.dp.dec,j.len));if(b!=f.value){f.setAttribute("gxvalid","0");f.value=b;e.callCloseHandler();if(j.grid>0){gx.fn.getGridObj(j.grid).setRowModified(gx.fn.currentGridRow(j.grid))}h.refreshDependantGrids(j)
}}}}};gx.thread={Map:function(){this.map={};this.add=function(a,b){this.map[a]=b};this.remove=function(a){delete this.map[a]};this.get=function(a){return a==null?null:this.map[a]};this.first=function(){return this.get(this.nextKey())};this.next=function(a){return this.get(this.nextKey(a))};this.nextKey=function(a){for(i in this.map){if(!a){return i}if(a==i){a=null}}return null}},Command:function(c,b,a){if(!gx.thread.Command.LastID){gx.thread.Command.LastID=0}this.id=++gx.thread.Command.LastID;this.execute=function(){b.apply(c,a)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(c,b,a,d){if(!gx.thread.Mutex.Wait){gx.thread.Mutex.Wait=new gx.thread.Map()}gx.thread.Mutex.SLICE=function(f,e){gx.thread.Mutex.Wait.get(f).attempt(gx.thread.Mutex.Wait.get(e))};this.attempt=function(h){for(var f=h;f;f=gx.thread.Mutex.Wait.next(f.c.id)){if(f.enter||(f.number&&(f.number<this.number||(f.number==this.number&&f.c.id<this.c.id)))){return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+f.c.id+")",10)}}try{retVal=this.c.execute()}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof(d)=="function"){try{d.call(c,retVal)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","Mutex CallBack")}}};this.c=new gx.thread.Command(c,b,a);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=true;this.number=(new Date()).getTime();this.enter=false;this.attempt(gx.thread.Mutex.Wait.first())}};gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var a=gx.fn.getHidden(this.keyName);if(gx.lang.emptyObject(a)){this.key=null}else{this.key=a}if(this.key!=null){this.loadSecToken()}},loadSecToken:function(){var a=gx.fn.getHidden(this.secTokenName);if(gx.lang.emptyObject(a)){this.secToken=null}else{this.secToken=a}},encrypt:function(b,a){try{a=(a==null)?this.key:a;if(a!=null){var g=this.rijndael;a=g.hexToByteArray(a);var c=g.rijndaelEncrypt(b,a);var f=g.byteArrayToHex(c);return f}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","encrypt")}return b},decrypt:function(d,a){try{a=(a==null)?this.key:a;if(a!=null){var g=this.rijndael;a=g.hexToByteArray(a);var c=g.hexToByteArray(d);var b=g.rijndaelDecrypt(c,a);return g.byteArrayToString(b)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","decrypt")}return d},_init:function(){this.rijndael._init()}};gx.base64={b64:[],f64:[],decode:function(a){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(a)))},encode:function(a){return this.encodeImpl(this.UTF8BytesFromString(a))},bytesFromUTF8Bytes:function(d){var f=[];var b=0;var e=c1=c2=0;var a=d.length;while(b<a){e=d[b];if(e<128){f.push(e);b++}else{if((e>191)&&(e<224)){c2=d[b+1];f.push(((e&31)<<6)|(c2&63));b+=2}else{c2=d[b+1];c3=d[b+2];f.push(((e&15)<<12)|((c2&63)<<6)|(c3&63));b+=3}}}return f},UTF8BytesFromString:function(b){b=b.replace(/\r\n/g,"\n");var d=[];var a=b.length;for(var f=0;f<a;f++){var e=b.charCodeAt(f);if(e<128){d.push(e)}else{if((e>127)&&(e<2048)){d.push((e>>6)|192);
d.push(((e&63)|128))}else{d.push(((e>>12)|224));d.push((((e>>6)&63)|128));d.push(((e&63)|128))}}}return d},bytesToString:function(Arr){var BUFFER_SIZE=50000;var strOut=[];while(Arr.length>=BUFFER_SIZE){strOut.push(eval("String.fromCharCode("+Arr.slice(0,BUFFER_SIZE).join(",")+");"));Arr=Arr.slice(BUFFER_SIZE)}if(Arr.length!=0){strOut.push(eval("String.fromCharCode("+Arr.join(",")+");"))}return strOut.join("")},decodeImpl:function(c){var f=this.f64;var e=[];var b=0;c=c.replace(/\n|\r/g,"");c=c.replace(/=/g,"");var a=c.length;while(b<a){e[e.length]=(f[c.charAt(b)]<<2)|(f[c.charAt(b+1)]>>4);e[e.length]=(((f[c.charAt(b+1)]&15)<<4)|(f[c.charAt(b+2)]>>2));e[e.length]=(((f[c.charAt(b+2)]&3)<<6)|(f[c.charAt(b+3)]));b+=4}if(c.length%4==2){e=e.slice(0,e.length-2)}if(c.length%4==3){e=e.slice(0,e.length-1)}return e},encodeImpl:function(h){var f=this.b64;var g=[];var e=0;var b=h.length;if((b%3)==1){h[h.length]=0;h[h.length]=0}if((b%3)==2){h[h.length]=0}var a=h.length;while(e<a){g[g.length]=f[h[e]>>2];g[g.length]=f[((h[e]&3)<<4)|(h[e+1]>>4)];g[g.length]=f[((h[e+1]&15)<<2)|(h[e+2]>>6)];g[g.length]=f[h[e+2]&63];e+=3}if((b%3)==1){g[g.length-1]=g[g.length-2]="="}if((b%3)==2){g[g.length-1]="="}var c=g.join("");return c},_init:function(){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var a=d.length;for(var b=0;b<a;b++){var e=d.charAt(b);this.b64[b]=e;this.f64[e]=b}}};